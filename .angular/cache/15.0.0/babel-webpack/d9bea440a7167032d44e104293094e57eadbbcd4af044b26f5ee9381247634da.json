{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/item.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction FilterComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵlistener(\"click\", function FilterComponent_div_9_Template_div_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.openCheckList($event));\n    });\n    i0.ɵɵtext(1, \" \\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0438\\u0437 \\u0441\\u043F\\u0438\\u0441\\u043A\\u0430 \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction FilterComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵlistener(\"click\", function FilterComponent_div_10_Template_div_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.openCheckList($event));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \\u0412\\u044B\\u0431\\u0440\\u0430\\u043D\\u043E \", ctx_r1.searchType.length, \" \");\n  }\n}\nfunction FilterComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\", 17)(2, \"input\", 18);\n    i0.ɵɵlistener(\"change\", function FilterComponent_div_12_Template_input_change_2_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.onCheckboxClick($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r8 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(item_r8);\n  }\n}\nfunction FilterComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"input\", 20);\n    i0.ɵɵlistener(\"click\", function FilterComponent_div_17_Template_input_click_1_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.onRadioClick($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"label\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r11 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r11);\n  }\n}\nexport class FilterComponent {\n  constructor(itemService) {\n    this.itemService = itemService;\n    this.searchItem = '';\n    this.searchSuffix = '';\n    this.searchType = [];\n    this.event = new EventEmitter();\n    this.event2 = new EventEmitter();\n    this.event3 = new EventEmitter();\n  }\n  set arrItems(value) {\n    if (value) {\n      this.searchType = [];\n      this.getChekboxArr(value);\n      this.getRadioArr(value);\n      // Запускаю setTimeout, чтобы запустить следующие функции в последнюю очередь в стеке\n      // Это нужно, чтобы дождаться прогрузки ДОМ-элементов\n      setTimeout(() => {\n        // Проверяем данные для фильтра Checkbox\n        this.localCheckbox();\n        // Проверяем данные для фильтра Radio\n        this.localRadio();\n      }, 0);\n    }\n  }\n  ngOnInit() {}\n  // Методы\n  getChekboxArr(value) {\n    this.checkboxArr = new Set(value.map(element => {\n      return element.type;\n    }));\n  }\n  getRadioArr(value) {\n    this.radioArr = new Set(value.map(element => {\n      return element.suffix;\n    }));\n  }\n  sendToList() {\n    this.event.emit(this.searchItem);\n  }\n  sendToList2(string) {\n    this.event2.emit(string);\n  }\n  sendToList3() {\n    this.event3.emit(this.searchSuffix);\n  }\n  openCheckList(event) {\n    let list = document.querySelector('.list__checkboxes');\n    list.classList.toggle('list__checkboxes-active');\n    // Красим нижний бордер\n    event.target.classList.toggle('list__select-active');\n  }\n  onCheckboxClick(event) {\n    let type;\n    type = event.target.nextElementSibling.innerHTML;\n    if (event.target.checked === true) {\n      //  Добавит элемент в массив\n      this.searchType.push(type);\n    } else {\n      let index;\n      // Возвратит индекс найденного элемента\n      index = this.searchType.indexOf(type, 0);\n      //  Удалит элемент из массива\n      this.searchType.splice(index, 1);\n    }\n    let string = '';\n    for (let i = 0; i < this.searchType.length; i++) {\n      string += `${this.searchType[i]},`;\n    }\n    //  Записываем состояние фильтра для дальнейшего использования при возвращении к списку компаний\n    localStorage.setItem('checkboxItem', string);\n    this.sendToList2(string);\n  }\n  onRadioClick(event) {\n    this.searchSuffix = event.target.nextElementSibling.innerHTML;\n    //  Записываем состояние фильтра для дальнейшего использования при возвращении к списку компаний\n    localStorage.setItem('radioItem', event.target.nextElementSibling.innerHTML);\n    this.sendToList3();\n  }\n  localCheckbox() {\n    let checkboxItem = localStorage.getItem('checkboxItem');\n    let arrCheck = Array.from(document.getElementsByName('checkbox'));\n    let listCheckbox = document.querySelector('.list__checkboxes');\n    if (checkboxItem != null && arrCheck != null && listCheckbox != null) {\n      // Массив строк (активных типов) из localStorage, у которых должны быть галочки\n      let arr = checkboxItem.split(',');\n      arrCheck.forEach(input => {\n        if (arr.includes(input.nextElementSibling.innerHTML)) {\n          input.checked = true;\n        }\n      });\n      // Раскрываем лист Checkbox\n      listCheckbox.classList.add('list__checkboxes-active');\n    }\n  }\n  localRadio() {\n    let radioItem = localStorage.getItem('radioItem');\n    let arrRadio = Array.from(document.getElementsByName('radio'));\n    if (radioItem != null && arrRadio != null) {\n      arrRadio.forEach(input => {\n        if (input.nextElementSibling.innerHTML === radioItem) {\n          input.checked = true;\n        }\n      });\n    }\n  }\n}\nFilterComponent.ɵfac = function FilterComponent_Factory(t) {\n  return new (t || FilterComponent)(i0.ɵɵdirectiveInject(i1.ItemService));\n};\nFilterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FilterComponent,\n  selectors: [[\"app-filter\"]],\n  inputs: {\n    arrItems: \"arrItems\"\n  },\n  outputs: {\n    event: \"event\",\n    event2: \"event2\",\n    event3: \"event3\"\n  },\n  decls: 18,\n  vars: 5,\n  consts: [[1, \"filter\"], [1, \"filter__title\"], [1, \"filter__search\", \"search\"], [\"id\", \"search-box\", \"placeholder\", \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\", 1, \"search__input\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [1, \"filter__list\", \"list\"], [1, \"filter__subtitle\"], [1, \"list__wrap\"], [\"class\", \"list__select\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"list__select list__select-active\", 3, \"click\", 4, \"ngIf\"], [1, \"list__checkboxes\"], [4, \"ngFor\", \"ngForOf\"], [1, \"filter__radio\", \"radio\"], [1, \"radio__title\"], [1, \"radio__checked-box\"], [\"class\", \"radio__item\", 4, \"ngFor\", \"ngForOf\"], [1, \"list__select\", 3, \"click\"], [1, \"list__select\", \"list__select-active\", 3, \"click\"], [1, \"list__checkbox\"], [\"type\", \"checkbox\", \"name\", \"checkbox\", 3, \"change\"], [1, \"radio__item\"], [\"type\", \"radio\", \"name\", \"radio\", \"value\", \"item.suffix\", 3, \"click\"]],\n  template: function FilterComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h3\", 1);\n      i0.ɵɵtext(2, \"\\u0424\\u0438\\u043B\\u044C\\u0442\\u0440\\u044B\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 2)(4, \"input\", 3);\n      i0.ɵɵlistener(\"ngModelChange\", function FilterComponent_Template_input_ngModelChange_4_listener($event) {\n        return ctx.searchItem = $event;\n      })(\"input\", function FilterComponent_Template_input_input_4_listener() {\n        return ctx.sendToList();\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"div\", 4)(6, \"span\", 5);\n      i0.ɵɵtext(7, \"\\u0422\\u0438\\u043F\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 6);\n      i0.ɵɵtemplate(9, FilterComponent_div_9_Template, 2, 0, \"div\", 7);\n      i0.ɵɵtemplate(10, FilterComponent_div_10_Template, 2, 1, \"div\", 8);\n      i0.ɵɵelementStart(11, \"div\", 9);\n      i0.ɵɵtemplate(12, FilterComponent_div_12_Template, 5, 1, \"div\", 10);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(13, \"div\", 11)(14, \"p\", 12);\n      i0.ɵɵtext(15, \"\\u0421\\u0443\\u0444\\u0444\\u0438\\u043A\\u0441\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"div\", 13);\n      i0.ɵɵtemplate(17, FilterComponent_div_17_Template, 4, 1, \"div\", 14);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.searchItem);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.searchType.length == 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.searchType.length > 0);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.checkboxArr);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.radioArr);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n  styles: [\".filter[_ngcontent-%COMP%] {\\n  width: 393px;\\n  height: 100%;\\n  border-left: 1px solid #A5A5A5;\\n  padding: 52px 32px;\\n}\\n.filter__subtitle[_ngcontent-%COMP%] {\\n  font-size: 14px;\\n  line-height: 16px;\\n  color: rgba(0, 0, 0, 0.4);\\n}\\n.filter__title[_ngcontent-%COMP%] {\\n  font-size: 24px;\\n  line-height: 32px;\\n  margin-bottom: 35px;\\n}\\n\\n.search[_ngcontent-%COMP%] {\\n  width: 100%;\\n  margin-bottom: 41px;\\n}\\n.search__input[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 7px 2px;\\n  border-bottom: 1px solid #A5A5A5;\\n  font-size: 16px;\\n  line-height: 19px;\\n  caret-color: #347CFF;\\n}\\n.search__input[_ngcontent-%COMP%]::placeholder {\\n  font-size: 16px;\\n  line-height: 19px;\\n  color: rgba(0, 0, 0, 0.4);\\n}\\n\\n.list[_ngcontent-%COMP%] {\\n  margin-bottom: 41px;\\n}\\n.list__select[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 0px 2px 7px 2px;\\n  border-bottom: 1px solid #A5A5A5;\\n  font-family: \\\"Roboto\\\";\\n  font-style: normal;\\n  font-weight: normal;\\n  font-size: 16px;\\n  line-height: 19px;\\n  color: rgba(0, 0, 0, 0.87);\\n  transition: 0.2s;\\n}\\n.list__select-active[_ngcontent-%COMP%] {\\n  border-bottom: 1px solid #347CFF;\\n}\\n.list__select[_ngcontent-%COMP%]:hover {\\n  cursor: pointer;\\n  color: #347CFF;\\n}\\n.list__checkboxes[_ngcontent-%COMP%] {\\n  display: none;\\n  width: 100%;\\n  flex-direction: column;\\n  padding: 15px 17px;\\n  box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.23), 0px 3px 6px rgba(0, 0, 0, 0.16);\\n}\\n.list__checkboxes-active[_ngcontent-%COMP%] {\\n  display: flex;\\n}\\n.list__checkbox[_ngcontent-%COMP%] {\\n  margin-bottom: 16px;\\n  display: flex;\\n  flex-wrap: nowrap;\\n  align-items: center;\\n}\\n.list__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  width: 18px;\\n  height: 18px;\\n  margin-right: 13px;\\n  font-size: 16px;\\n  line-height: 19px;\\n  color: #000000;\\n}\\n\\n.radio__title[_ngcontent-%COMP%] {\\n  font-weight: bold;\\n  font-size: 16px;\\n  line-height: 19px;\\n  margin-bottom: 25px;\\n}\\n.radio__checked-box[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n.radio__item[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-wrap: nowrap;\\n  align-items: center;\\n  margin-bottom: 20px;\\n}\\n.radio__item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  width: 16px;\\n  height: 16px;\\n  margin-right: 28px;\\n}\\n.radio__item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\\n  font-size: 16px;\\n  line-height: 19px;\\n}\\n/*# sourceURL=webpack://./src/app/components/filter/filter.component.scss */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9maWx0ZXIvZmlsdGVyLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksWUFBQTtFQUNBLFlBQUE7RUFDQSw4QkFBQTtFQUNBLGtCQUFBO0FBQ0o7QUFBSTtFQUNJLGVBQUE7RUFDQSxpQkFBQTtFQUNBLHlCQUFBO0FBRVI7QUFBSTtFQUNJLGVBQUE7RUFDQSxpQkFBQTtFQUNBLG1CQUFBO0FBRVI7O0FBQ0E7RUFDSSxXQUFBO0VBQ0EsbUJBQUE7QUFFSjtBQUFJO0VBQ0ksV0FBQTtFQUNBLGdCQUFBO0VBQ0EsZ0NBQUE7RUFDQSxlQUFBO0VBQ0EsaUJBQUE7RUFDQSxvQkFBQTtBQUVSO0FBQVE7RUFDSSxlQUFBO0VBQ0EsaUJBQUE7RUFDQSx5QkFBQTtBQUVaOztBQUdBO0VBQ0ksbUJBQUE7QUFBSjtBQUNJO0VBQ0ksV0FBQTtFQUNBLHdCQUFBO0VBQ0EsZ0NBQUE7RUFDQSxxQkFBQTtFQUNBLGtCQUFBO0VBQ0EsbUJBQUE7RUFDQSxlQUFBO0VBQ0EsaUJBQUE7RUFDQSwwQkFBQTtFQUNBLGdCQUFBO0FBQ1I7QUFBUTtFQUNJLGdDQUFBO0FBRVo7QUFBUTtFQUNJLGVBQUE7RUFDQSxjQUFBO0FBRVo7QUFDSTtFQUNJLGFBQUE7RUFDQSxXQUFBO0VBQ0Esc0JBQUE7RUFDQSxrQkFBQTtFQUNBLDRFQUFBO0FBQ1I7QUFBUTtFQUNJLGFBQUE7QUFFWjtBQUNJO0VBQ0ksbUJBQUE7RUFDQSxhQUFBO0VBQ0EsaUJBQUE7RUFDQSxtQkFBQTtBQUNSO0FBQVE7RUFDSSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGtCQUFBO0VBQ0EsZUFBQTtFQUNBLGlCQUFBO0VBQ0EsY0FBQTtBQUVaOztBQUdJO0VBQ0ksaUJBQUE7RUFDQSxlQUFBO0VBQ0EsaUJBQUE7RUFDQSxtQkFBQTtBQUFSO0FBRUk7RUFDSSxXQUFBO0FBQVI7QUFFSTtFQUNJLGFBQUE7RUFDQSxpQkFBQTtFQUNBLG1CQUFBO0VBQ0EsbUJBQUE7QUFBUjtBQUNRO0VBQ0ksV0FBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtBQUNaO0FBQ1E7RUFDSSxlQUFBO0VBQ0EsaUJBQUE7QUFDWiIsInNvdXJjZXNDb250ZW50IjpbIi5maWx0ZXIge1xuICB3aWR0aDogMzkzcHg7XG4gIGhlaWdodDogMTAwJTtcbiAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjQTVBNUE1O1xuICBwYWRkaW5nOiA1MnB4IDMycHg7XG59XG4uZmlsdGVyX19zdWJ0aXRsZSB7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgbGluZS1oZWlnaHQ6IDE2cHg7XG4gIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNCk7XG59XG4uZmlsdGVyX190aXRsZSB7XG4gIGZvbnQtc2l6ZTogMjRweDtcbiAgbGluZS1oZWlnaHQ6IDMycHg7XG4gIG1hcmdpbi1ib3R0b206IDM1cHg7XG59XG5cbi5zZWFyY2gge1xuICB3aWR0aDogMTAwJTtcbiAgbWFyZ2luLWJvdHRvbTogNDFweDtcbn1cbi5zZWFyY2hfX2lucHV0IHtcbiAgd2lkdGg6IDEwMCU7XG4gIHBhZGRpbmc6IDdweCAycHg7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjQTVBNUE1O1xuICBmb250LXNpemU6IDE2cHg7XG4gIGxpbmUtaGVpZ2h0OiAxOXB4O1xuICBjYXJldC1jb2xvcjogIzM0N0NGRjtcbn1cbi5zZWFyY2hfX2lucHV0OjpwbGFjZWhvbGRlciB7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgbGluZS1oZWlnaHQ6IDE5cHg7XG4gIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNCk7XG59XG5cbi5saXN0IHtcbiAgbWFyZ2luLWJvdHRvbTogNDFweDtcbn1cbi5saXN0X19zZWxlY3Qge1xuICB3aWR0aDogMTAwJTtcbiAgcGFkZGluZzogMHB4IDJweCA3cHggMnB4O1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0E1QTVBNTtcbiAgZm9udC1mYW1pbHk6IFwiUm9ib3RvXCI7XG4gIGZvbnQtc3R5bGU6IG5vcm1hbDtcbiAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBsaW5lLWhlaWdodDogMTlweDtcbiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC44Nyk7XG4gIHRyYW5zaXRpb246IDAuMnM7XG59XG4ubGlzdF9fc2VsZWN0LWFjdGl2ZSB7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMzQ3Q0ZGO1xufVxuLmxpc3RfX3NlbGVjdDpob3ZlciB7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgY29sb3I6ICMzNDdDRkY7XG59XG4ubGlzdF9fY2hlY2tib3hlcyB7XG4gIGRpc3BsYXk6IG5vbmU7XG4gIHdpZHRoOiAxMDAlO1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBwYWRkaW5nOiAxNXB4IDE3cHg7XG4gIGJveC1zaGFkb3c6IDBweCAzcHggNnB4IHJnYmEoMCwgMCwgMCwgMC4yMyksIDBweCAzcHggNnB4IHJnYmEoMCwgMCwgMCwgMC4xNik7XG59XG4ubGlzdF9fY2hlY2tib3hlcy1hY3RpdmUge1xuICBkaXNwbGF5OiBmbGV4O1xufVxuLmxpc3RfX2NoZWNrYm94IHtcbiAgbWFyZ2luLWJvdHRvbTogMTZweDtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC13cmFwOiBub3dyYXA7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG4ubGlzdF9fY2hlY2tib3ggaW5wdXQge1xuICB3aWR0aDogMThweDtcbiAgaGVpZ2h0OiAxOHB4O1xuICBtYXJnaW4tcmlnaHQ6IDEzcHg7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgbGluZS1oZWlnaHQ6IDE5cHg7XG4gIGNvbG9yOiAjMDAwMDAwO1xufVxuXG4ucmFkaW9fX3RpdGxlIHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgbGluZS1oZWlnaHQ6IDE5cHg7XG4gIG1hcmdpbi1ib3R0b206IDI1cHg7XG59XG4ucmFkaW9fX2NoZWNrZWQtYm94IHtcbiAgd2lkdGg6IDEwMCU7XG59XG4ucmFkaW9fX2l0ZW0ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LXdyYXA6IG5vd3JhcDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgbWFyZ2luLWJvdHRvbTogMjBweDtcbn1cbi5yYWRpb19faXRlbSBpbnB1dCB7XG4gIHdpZHRoOiAxNnB4O1xuICBoZWlnaHQ6IDE2cHg7XG4gIG1hcmdpbi1yaWdodDogMjhweDtcbn1cbi5yYWRpb19faXRlbSBsYWJlbCB7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgbGluZS1oZWlnaHQ6IDE5cHg7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["EventEmitter","i0","FilterComponent","constructor","itemService","arrItems","value","searchType","getChekboxArr","getRadioArr","setTimeout","localCheckbox","localRadio","ngOnInit","checkboxArr","Set","map","element","type","radioArr","suffix","sendToList","event","emit","searchItem","sendToList2","string","event2","sendToList3","event3","searchSuffix","openCheckList","list","document","querySelector","classList","toggle","target","onCheckboxClick","nextElementSibling","innerHTML","checked","push","index","indexOf","splice","i","length","localStorage","setItem","onRadioClick","checkboxItem","getItem","arrCheck","Array","from","getElementsByName","listCheckbox","arr","split","forEach","input","includes","add","radioItem","arrRadio","selectors","inputs","outputs","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\projects\\angular-embedika-master\\src\\app\\components\\filter\\filter.component.ts","D:\\projects\\angular-embedika-master\\src\\app\\components\\filter\\filter.component.html"],"sourcesContent":["import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { Item } from '../../interfaces/item';\nimport { ItemService } from '../../services/item.service';\n\n@Component({\n  selector: 'app-filter',\n  templateUrl: './filter.component.html',\n  styleUrls: ['./filter.component.scss']\n})\nexport class FilterComponent implements OnInit {\n\n    public searchItem: string = '';\n    public searchSuffix: string = '';\n    public searchType: any = [];\n    public checkboxArr: any;\n    public radioArr: any;\n\n    @Input() set arrItems(value: Item[]) {\n        if (value) {\n            this.searchType = [];\n            this.getChekboxArr(value);\n            this.getRadioArr(value);\n\n            // Запускаю setTimeout, чтобы запустить следующие функции в последнюю очередь в стеке\n            // Это нужно, чтобы дождаться прогрузки ДОМ-элементов\n            setTimeout(() => {\n            // Проверяем данные для фильтра Checkbox\n            this.localCheckbox();\n            // Проверяем данные для фильтра Radio\n            this.localRadio();\n            }, 0);\n        }\n    };\n    @Output() event: EventEmitter<string> = new EventEmitter();\n    @Output() event2: EventEmitter<string> = new EventEmitter();\n    @Output() event3: EventEmitter<string> = new EventEmitter();\n\n\n    constructor(private itemService: ItemService) { }\n\n    ngOnInit(): void {}\n\n    // Методы\n    getChekboxArr(value: Item[]) {\n        this.checkboxArr = new Set(value.map((element: Item) => {\n            return element.type;\n        }));\n    }\n\n    getRadioArr(value: Item[]) {\n        this.radioArr = new Set(value.map((element: Item) => {\n            return element.suffix;\n        }));\n    }\n\n    sendToList() {\n        this.event.emit(this.searchItem);\n    }\n\n    sendToList2(string: string) {\n        this.event2.emit(string);\n    }\n\n    sendToList3() {\n        this.event3.emit(this.searchSuffix);\n    }\n\n    openCheckList(event: any): void {\n        let list: any = document.querySelector('.list__checkboxes');\n        list.classList.toggle('list__checkboxes-active');\n        // Красим нижний бордер\n        event.target.classList.toggle('list__select-active');\n    }\n\n    onCheckboxClick(event: any): void {\n        let type;\n        type = event.target.nextElementSibling.innerHTML;\n\n        if (event.target.checked === true) {\n            //  Добавит элемент в массив\n            this.searchType.push(type);\n        } else {\n            let index;\n            // Возвратит индекс найденного элемента\n            index = this.searchType.indexOf(type, 0);\n            //  Удалит элемент из массива\n            this.searchType.splice(index, 1);\n        }\n\n        let string = '';\n        for (let i = 0; i < this.searchType.length; i++) {\n            string += `${this.searchType[i]},`;\n        }\n\n        //  Записываем состояние фильтра для дальнейшего использования при возвращении к списку компаний\n        localStorage.setItem('checkboxItem', string);\n\n        this.sendToList2(string);\n    }\n\n\n    onRadioClick(event:any): void {\n        this.searchSuffix = event.target.nextElementSibling.innerHTML;\n\n        //  Записываем состояние фильтра для дальнейшего использования при возвращении к списку компаний\n        localStorage.setItem('radioItem', event.target.nextElementSibling.innerHTML);\n\n        this.sendToList3();\n    }\n\n    localCheckbox (): void {\n        let checkboxItem = localStorage.getItem('checkboxItem');\n        let arrCheck: Array<any> | null =  Array.from(document.getElementsByName('checkbox'));\n        let listCheckbox: any = document.querySelector('.list__checkboxes');\n\n        if (checkboxItem != null && arrCheck != null && listCheckbox != null) {\n            // Массив строк (активных типов) из localStorage, у которых должны быть галочки\n            let arr = checkboxItem.split(',');\n\n            arrCheck.forEach((input) => {\n                if (arr.includes(input.nextElementSibling.innerHTML)) {\n                    input.checked = true;\n                }\n            });\n\n            // Раскрываем лист Checkbox\n            listCheckbox.classList.add('list__checkboxes-active');\n\n        }\n    }\n\n    localRadio (): void {\n        let radioItem = localStorage.getItem('radioItem');\n        let arrRadio: Array<any> | null =  Array.from(document.getElementsByName('radio'));\n\n        if (radioItem != null && arrRadio != null) {\n            arrRadio.forEach((input) => {\n                if (input.nextElementSibling.innerHTML === radioItem) {\n                    input.checked = true;\n                }\n            });\n        }\n    }\n}\n","<div class=\"filter\">\n    <h3 class=\"filter__title\">Фильтры</h3>\n    <div class=\"filter__search search\">\n        <input id=\"search-box\" placeholder=\"Название\" class=\"search__input\" [(ngModel)]=\"searchItem\" (input)=\"sendToList()\"/>\n    </div>\n    <div class=\"filter__list list\">\n        <span class=\"filter__subtitle\">Тип</span>\n        <div class=\"list__wrap\">\n            <div class=\"list__select\" *ngIf=\"searchType.length == 0\" (click)=\"openCheckList($event)\">\n                Выберите из списка\n            </div>\n            <div class=\"list__select list__select-active\"  *ngIf=\"searchType.length > 0\" (click)=\"openCheckList($event)\">\n                Выбрано {{searchType.length}}\n            </div>\n            <div class=\"list__checkboxes\">\n                <div *ngFor=\"let item of checkboxArr\">\n                    <label class=\"list__checkbox\">\n                        <input type=\"checkbox\" name=\"checkbox\" (change)=\"onCheckboxClick($event)\"/><span>{{item}}</span>\n                    </label> \n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"filter__radio radio\">\n        <p class=\"radio__title\">Суффикс</p>\n        <div class=\"radio__checked-box\">\n            <div class=\"radio__item\" *ngFor=\"let item of radioArr\">\n                <input type=\"radio\" name=\"radio\" value=\"item.suffix\" (click)=\"onRadioClick($event)\">\n                <label >{{item}}</label>\n            </div>\n        </div>\n    </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}